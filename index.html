<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Index.css"> <!-- External css -->
    <script>
        //Token Permission
        function fcmNotificationPermissionHandler(){
        clevertap.notifications.push({
            // "apnsWebPushId": "<apple web push id>",
            // "apnsWebPushServiceUrl": "<safari package service url>", 
               "titleText": "Would you like to receive Push Notifications?",
               "bodyText": "We promise to only send you relevant content and give you updates on your transactions",
               "okButtonText": "Sign me up!",
               "rejectButtonText": "No thanks",
               "okButtonColor":"#F28046",
               "askAgainTimeInSeconds":5,
               "serviceWorkerPath": "clevertap_sw.js" // path to your custom service worker file
            });
        }
        document.addEventListener("DOMContentLoaded",fcmNotificationPermissionHandler); 
        
        //Calling native display
        function getUrlParameter(name) {
            // Use a regular expression to search for the parameter in the URL
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(window.location.href);
            
            // If the parameter is found, return its value, otherwise return null
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        var param=getUrlParameter('UTM');
        console.log(param); 
                
        function nativeDisplay(){
            clevertap.event.push("Web Native Display", {
                "Source":param
              });
        }
        document.addEventListener("DOMContentLoaded",nativeDisplay);
    </script>

</head>
<body>
    <div class="navbar">
        <div class="login-button">
            <button onclick="location.href='login.html'">Login</button>
        </div>
    </div>
<div class="popUps-container">

    <div style="padding:20px">
        <h2>CleverTap Web Integration</h2>
    </div>
    
    <!-- Web Pop-up Options -->
    <div class="popup-options">
        <button onclick="box()" id="box">Box</button>
        <button onclick="banner()" id="banner">Banner</button>
        <button onclick="interstitial()" id="interstitial">Interstitial</button>
        <button onclick="image()" id="image_only">Image Only</button>
        <button onclick="Push()" id="Push">Web Push</button>
        
    </div>
</div>

    

    <div id="container">
      <div id="image-container">
      </div>
    </div>

    <script type="text/javascript" src="Index.js"></script> <!-- CleverTap Web Integration JavaScript -->
</body>
</html>
